<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factor Optimizer ‚Äî AncserQuant</title>
    <meta name="description" content="Automated factor optimization via random search">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <!-- Header -->
    <header id="app-header">
        <div class="header-left">
            <div class="logo-mark">‚ö°</div>
            <div>
                <h1>Factor Optimizer</h1>
                <span class="subtitle">Random Search ‚Äî Best Calmar</span>
            </div>
        </div>
        <div class="header-right">
            <a href="/" class="btn btn-secondary" style="margin-right:12px; text-decoration:none;">‚Üê Dashboard</a>
            <div class="status-pill" id="statusPill">
                <span class="status-dot"></span>
                <span id="statusText">Ready</span>
            </div>
        </div>
    </header>

    <main class="optimizer-main">
        <!-- Controls -->
        <section class="opt-controls">
            <div class="opt-controls-row">
                <div class="control-group compact">
                    <label>Iterations</label>
                    <input type="number" id="nIterations" value="50" min="5" max="500" step="5" />
                </div>
                <div class="control-group compact">
                    <label>Min Factors</label>
                    <input type="number" id="minFactors" value="1" min="1" max="8" />
                </div>
                <div class="control-group compact">
                    <label>Max Factors</label>
                    <input type="number" id="maxFactors" value="5" min="1" max="8" />
                </div>
                <div class="control-group compact">
                    <label>Universe</label>
                    <select id="optUniverse">
                        <option value="sp500_nasdaq100" selected>S&P500 + NDX100</option>
                        <option value="sp500">S&P 500</option>
                        <option value="nasdaq100">NASDAQ 100</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
                <button class="btn btn-primary" id="btnStart" onclick="startOptimizer()">
                    <span class="btn-icon">‚ñ∂</span> Start
                </button>
                <button class="btn btn-secondary" id="btnStop" onclick="stopOptimizer()" disabled>
                    ‚ñ† Stop
                </button>
            </div>
        </section>

        <!-- Progress -->
        <section class="opt-progress" id="progressSection" style="display:none;">
            <div class="progress-info">
                <span id="progressLabel">0 / 50</span>
                <span id="progressEta">ETA: ‚Äî</span>
            </div>
            <div class="progress-bar-track">
                <div class="progress-bar-fill" id="progressFill" style="width:0%"></div>
            </div>
        </section>

        <!-- Best Config Card -->
        <section class="opt-best" id="bestSection" style="display:none;">
            <h3 class="chart-title">üèÜ Best Configuration</h3>
            <div class="best-config-card" id="bestCard"></div>
        </section>

        <!-- Leaderboard -->
        <section class="opt-leaderboard" id="leaderboardSection" style="display:none;">
            <h3 class="chart-title">üìä Leaderboard <span class="period-count" id="resultsCount"></span></h3>
            <div class="table-wrapper">
                <table id="leaderboardTable">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Calmar</th>
                            <th>CAGR</th>
                            <th>Max DD</th>
                            <th>Sharpe</th>
                            <th>Top N</th>
                            <th>Rebalance</th>
                            <th>Years</th>
                            <th>Factors</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody"></tbody>
                </table>
            </div>
        </section>
    </main>

    <script src="/static/optimizer.js"></script>
</body>

</html>